<tests name="check constants"><test name="check $mx:mode"><expected>true</expected><result>true</result></test><test name="check $mx:controller-path"><expected>true</expected><result>true</result></test><test name="check $mx:default-content-type"><expected>true</expected><result>true</result></test><test name="check $mx:LOG-LEVEL"><expected>true</expected><result>true</result></test><test name="check default $mx:flush-flag"><expected>true</expected><result>true</result></test><test name="check default $mx:debug-flag"><expected>true</expected><result>true</result></test><test name="check default $mx:profile-flag"><expected>true</expected><result>true</result></test><test name="check default $mx:doc-flag"><expected>true</expected><result>true</result></test><test name="check default $mx:cache-flag"><expected>true</expected><result>true</result></test><test name="check default $mx:assert"><expected>true</expected><result>true</result></test><test name="$mx:map should load into server-field"><expected>map(&lt;map:map xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:map="http://marklogic.com/xdmp/map"&gt;&lt;map:entry key="/data3"&gt;&lt;map:value&gt;&lt;path url="/data3" type="template" method="GET" content-type="text/html" data="/data3.test" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;textarea rows="10" cols="50"&gt;{.}&lt;/textarea&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/xquery.test"&gt;&lt;map:value&gt;&lt;path url="/xquery.test" method="GET" href="/modules/example.xqy" xmlns="http://www.marklogic.com/mx"/&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data2.test"&gt;&lt;map:value&gt;&lt;path url="/data2.test" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    let $data := &lt;test&gt;a&lt;/test&gt;&amp;#10;    return $data&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/inline2.test"&gt;&lt;map:value&gt;&lt;path url="/inline2.test" type="inline" method="GET" description="inline test with no content type set, should fall back to using application/xml" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;h1&gt;inline test&lt;/h1&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/xquery2.test"&gt;&lt;map:value&gt;&lt;path url="/xquery2.test" method="GET" href="/module/test.xqm" invoke-function="local:test" invoke-ns="" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    ('test')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data4.test"&gt;&lt;map:value&gt;&lt;path url="/data4.test" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    mx:data('/mx')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data4"&gt;&lt;map:value&gt;&lt;path url="/data4" type="xslt-template" method="GET" content-type="text/html" data="/data3.test" description="inline test with no content type set, should fall back to using application/xml" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/inline.test"&gt;&lt;map:value&gt;&lt;path url="/inline.test" content-type="text/html" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;h1&gt;inline test&lt;/h1&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/mx"&gt;&lt;map:value&gt;&lt;path url="/mx" method="GET" type="inline" content-type="text/html" description="MX status page" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;h1&gt;MX Status Page&lt;/h1&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/mx/map"&gt;&lt;map:value&gt;&lt;path url="/mx/map" method="GET" content-type="text/plain" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    mx:map()&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/redirect.test"&gt;&lt;map:value&gt;&lt;path url="/redirect.test" type="redirect" description="example of                                                          redirecting,                                                           changing the                                                           url" xmlns="http://www.marklogic.com/mx"&gt;/static-test.html&lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="passthru"&gt;&lt;map:value xsi:type="xs:string"&gt;^/resource/*&lt;/map:value&gt;&lt;map:value xsi:type="xs:string"&gt;^/robots.txt$&lt;/map:value&gt;&lt;map:value xsi:type="xs:string"&gt;^/static-test.html$&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/forward.test"&gt;&lt;map:value&gt;&lt;path url="/forward.test" type="forward" description="example of forwarding" xmlns="http://www.marklogic.com/mx"&gt;/static-test.html&lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data.test"&gt;&lt;map:value&gt;&lt;path url="/data.test" method="GET" description="inline test with no content type set, should fall back to using application/xml" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;data title="this is /data.test"&gt;&amp;#10;      &lt;test&gt;&amp;#10;        &lt;a&gt;{1 + 1}&lt;/a&gt;&amp;#10;      &lt;/test&gt;&amp;#10;    &lt;/data&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data3.test"&gt;&lt;map:value&gt;&lt;path url="/data3.test" method="GET" content-type="text/plain" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    mx:eval('1 + 1')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data5.test"&gt;&lt;map:value&gt;&lt;path url="/data5.test" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;  mx:data('/data.test')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;/map:map&gt;)</expected><result>map(&lt;map:map xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:map="http://marklogic.com/xdmp/map"&gt;&lt;map:entry key="/data3"&gt;&lt;map:value&gt;&lt;path url="/data3" type="template" method="GET" content-type="text/html" data="/data3.test" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;textarea rows="10" cols="50"&gt;{.}&lt;/textarea&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/xquery.test"&gt;&lt;map:value&gt;&lt;path url="/xquery.test" method="GET" href="/modules/example.xqy" xmlns="http://www.marklogic.com/mx"/&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data2.test"&gt;&lt;map:value&gt;&lt;path url="/data2.test" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    let $data := &lt;test&gt;a&lt;/test&gt;&amp;#10;    return $data&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/inline2.test"&gt;&lt;map:value&gt;&lt;path url="/inline2.test" type="inline" method="GET" description="inline test with no content type set, should fall back to using application/xml" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;h1&gt;inline test&lt;/h1&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/xquery2.test"&gt;&lt;map:value&gt;&lt;path url="/xquery2.test" method="GET" href="/module/test.xqm" invoke-function="local:test" invoke-ns="" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    ('test')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data4.test"&gt;&lt;map:value&gt;&lt;path url="/data4.test" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    mx:data('/mx')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data4"&gt;&lt;map:value&gt;&lt;path url="/data4" type="xslt-template" method="GET" content-type="text/html" data="/data3.test" description="inline test with no content type set, should fall back to using application/xml" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/inline.test"&gt;&lt;map:value&gt;&lt;path url="/inline.test" content-type="text/html" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;h1&gt;inline test&lt;/h1&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/mx"&gt;&lt;map:value&gt;&lt;path url="/mx" method="GET" type="inline" content-type="text/html" description="MX status page" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;html&gt;&amp;#10;      &lt;body&gt;&amp;#10;        &lt;h1&gt;MX Status Page&lt;/h1&gt;&amp;#10;      &lt;/body&gt;&amp;#10;    &lt;/html&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/mx/map"&gt;&lt;map:value&gt;&lt;path url="/mx/map" method="GET" content-type="text/plain" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    mx:map()&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/redirect.test"&gt;&lt;map:value&gt;&lt;path url="/redirect.test" type="redirect" description="example of                                                          redirecting,                                                           changing the                                                           url" xmlns="http://www.marklogic.com/mx"&gt;/static-test.html&lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="passthru"&gt;&lt;map:value xsi:type="xs:string"&gt;^/resource/*&lt;/map:value&gt;&lt;map:value xsi:type="xs:string"&gt;^/robots.txt$&lt;/map:value&gt;&lt;map:value xsi:type="xs:string"&gt;^/static-test.html$&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/forward.test"&gt;&lt;map:value&gt;&lt;path url="/forward.test" type="forward" description="example of forwarding" xmlns="http://www.marklogic.com/mx"&gt;/static-test.html&lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data.test"&gt;&lt;map:value&gt;&lt;path url="/data.test" method="GET" description="inline test with no content type set, should fall back to using application/xml" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    &lt;data title="this is /data.test"&gt;&amp;#10;      &lt;test&gt;&amp;#10;        &lt;a&gt;{1 + 1}&lt;/a&gt;&amp;#10;      &lt;/test&gt;&amp;#10;    &lt;/data&gt;&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data3.test"&gt;&lt;map:value&gt;&lt;path url="/data3.test" method="GET" content-type="text/plain" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;    mx:eval('1 + 1')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;map:entry key="/data5.test"&gt;&lt;map:value&gt;&lt;path url="/data5.test" method="GET" xmlns="http://www.marklogic.com/mx"&gt;&amp;#10;  mx:data('/data.test')&amp;#10;  &lt;/path&gt;&lt;/map:value&gt;&lt;/map:entry&gt;&lt;/map:map&gt;)</result></test></tests>